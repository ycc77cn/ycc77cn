/* @du/callapp version: 0.3.5 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).$_callapp=n()}(this,(function(){"use strict";function asyncGeneratorStep(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){asyncGeneratorStep(a,r,o,i,c,"next",e)}function c(e){asyncGeneratorStep(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _objectWithoutPropertiesLoose$1(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}function _objectWithoutProperties$1(e,n){if(null==e)return{};var t,r,o=_objectWithoutPropertiesLoose$1(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function _classCallCheck$2(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ownKeys$1(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys$1(Object(t),!0).forEach((function(n){_defineProperty$1(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},regeneratorRuntime$1={exports:{}},_typeof$2={exports:{}};!function(e){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$2),function(e){var n=_typeof$2.exports.default;function t(){e.exports=t=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,a=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{l({},"")}catch(e){l=function(e,n,t){return e[n]=t}}function d(e,n,t,r){var o=n&&n.prototype instanceof m?n:m,a=Object.create(o.prototype),i=new E(r||[]);return a._invoke=function(e,n,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return P()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var c=T(i,t);if(c){if(c===f)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var s=p(e,n,t);if("normal"===s.type){if(r=t.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(r="completed",t.method="throw",t.arg=s.arg)}}}(e,t,i),a}function p(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var f={};function m(){}function h(){}function _(){}var v={};l(v,c,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(U([])));g&&g!==o&&a.call(g,c)&&(v=g);var b=_.prototype=m.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(n){l(e,n,(function(e){return this._invoke(n,e)}))}))}function k(e,t){function r(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function T(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,T(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=p(t,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function S(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function x(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function U(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,r=function n(){for(;++t<e.length;)if(a.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=_,l(b,"constructor",_),l(_,"constructor",h),h.displayName=l(_,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===h||"GeneratorFunction"===(n.displayName||n.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},r.awrap=function(e){return{__await:e}},w(k.prototype),l(k.prototype,s,(function(){return this})),r.AsyncIterator=k,r.async=function(e,n,t,o,a){void 0===a&&(a=Promise);var i=new k(d(e,n,t,o),a);return r.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),l(b,u,"Generator"),l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=U,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=n,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),f},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),x(t),f}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;x(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:U(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(regeneratorRuntime$1);var runtime=regeneratorRuntime$1.exports(),regenerator=runtime;try{regeneratorRuntime=runtime}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}var dist={},configCenter={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function sleep(e){return new Promise((function(n){setTimeout((function(){n(!0)}),e)}))}Object.defineProperty(configCenter,"__esModule",{value:!0}),configCenter.sleep=configCenter.getConfigCenter=void 0,configCenter.getConfigCenter=function(e){return __awaiter$1(void 0,void 0,void 0,(function(){return __generator$1(this,(function(n){return[2,Promise.race([fetch("https://cdn-config.dewu.com/node-common/configCenter/"+e.project+"/"+e.key+".json").then((function(e){return e.text()})).then((function(n){var t;try{t=JSON.parse(JSON.parse(n).data)}catch(n){t=e.defaultValue}return t})),sleep(1500).then((function(){return e.defaultValue}))])]}))}))},configCenter.sleep=sleep;var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},__assign.apply(this,arguments)},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},__rest=commonjsGlobal&&commonjsGlobal.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t};Object.defineProperty(dist,"__esModule",{value:!0});var configCenter_1=configCenter,globalRouterPaths=[];function initPaths(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),globalRouterPaths.length?[3,2]:[4,configCenter_1.getConfigCenter({project:"call-app",key:"routerList",defaultValue:{list:[]}})];case 1:e=n.sent(),globalRouterPaths=e.list,n.label=2;case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}function validRouteParams(e,n){var t=!0,r="";try{Object.keys(e||{}).forEach((function(o){var a,i=null===(a=n.params)||void 0===a?void 0:a.find((function(e){return e.key===o}));!i||"1"!==i.required||e[o]&&"null"!==e[o]&&"undefined"!==e[o]&&"NaN"!==e[o]||(r=o,t=!1),i&&["int","long"].includes(i.type.toLowerCase())&&isNaN(Number(e[o]))&&(r=o,t=!1),i&&["string"].includes(i.type.toLowerCase())&&e[o]!==e[o].trim()&&(r=o,t=!1)}))}catch(e){t=!1}return{valid:t,errKey:r}}function isValidRouterPath(e){return!(globalRouterPaths.length>0)||globalRouterPaths.find((function(n){return e.includes(n.path)}))}function getQuery$1(e){var n={},t=e.split("?")[1];if(t)for(var r,o=t.split("&"),a=void 0,i=void 0,c=0,s=o.length;c<s;c++)r=(a=o[c].split("="))[0],i=a[1],n[r]=i;return n}function checkRouterUrl(e){var n=[],t=getParseUrl(e).searchParams.routerUrl;if(!t)return n.push({errorType:"routerUrlError",errData:"未提供routerUrl参数"}),n;var r=decodeURIComponent(t);if(0!==r.indexOf("https://"))return n.push({errorType:"routerUrlError",errData:"routerUrl可能被编码超过1次"}),n;var o=getParseUrl(r),a=o.pathname,i=o.searchParams,c=i.eaNo,s=i.spuId,u=__rest(i,["eaNo","spuId"]);if(r.includes("/router/product/ProductDetail")&&("number"!=typeof Number(s)||isNaN(Number(s))))return n.push({errorType:"paramsError",errData:"参数spuId错误"}),n;a.includes("/router/order/ChangeReservationDetailActivity")&&!c&&n.push({errorType:"paramsError",errData:"eaNo缺失"});var l=isValidRouterPath(a);if(l){if("boolean"!=typeof l){var d=validRouteParams(__assign({eaNo:c,spuId:s},u),l),p=d.valid,f=d.errKey;p||n.push({errorType:"paramsError",errData:"参数"+f+"错误"})}}else n.push({errorType:"linkError",errData:"无效的全局路由"});return n=n.concat(checkLoadUrl(r))}function checkLoadUrl(e){var n=[],t=getParseUrl(e).searchParams,r=e.includes("web/BrowserPage"),o=t.loadUrl;if(!o)return n;var a=decodeURIComponent(o),i=encodeURIComponent(a);decodeURIComponent(i)!==a&&n.push({errorType:"loadUrlError",errData:"loadUrl不是正确的转译地址"}),r&&/\/nezha-plus\/detail\//.test(a)&&(/\/nezha-plus\/detail\/[a-z0-9]{24}/i.test(a)||n.push({errorType:"loadUrlError",errData:"会场loadUrl的url链接有误，可能存在空格或者特殊符号"})),r&&/&/.test(a)&&!/\?/.test(a)&&n.push({errorType:"loadUrlError",errData:"loadUrl 的url参数拼接错误，可能存在空格或者特殊符号，应该使用问号代替&"});return r&&a&&!/^((http|https):\/\/)+([\w\-])+\.*/.test(a)&&n.push({errorType:"loadUrlError",errData:"loadUrl的url链接有误，可能存在空格或者特殊符号"}),n}function isOld(e){var n=getParseUrl(e),t=n.protocol,r=n.hostname;return"dewuapp:"===t||"https:"===t&&("m.poizon.com"===r||"m.dewu.com"===r)}function getParseUrl(e){var n=new URL(e),t=n.protocol,r=n.href,o=new URL(e.replace(/^\w+:/,"https:"));return{href:r,protocol:t,hostname:o.hostname,pathname:o.pathname,searchParams:getQuery$1(e)}}function checkDomainPath(e){var n=getParseUrl(e),t=n.hostname,r=n.pathname,o=n.protocol,a=n.searchParams,i=[];if(["dewulink:","dewuapp:"].includes(o)||"https:"===o||i.push({errorType:"protocolError",errData:"无效的协议"}),["apk.poizon.com","apk.dewu.com","m.poizon.com","m.dewu.com"].includes(t)||i.push({errorType:"domainError",errData:"无效的唤端域名"}),isOld(e)||["/note","/identify","/redirect","/qq","/weixin","/qq_conn/1104972716","/wechat","/nezha/sceneMiddlePage","/alipay"].some((function(e){return r.includes(e)}))||i.push({errorType:"schemeError",errData:"无效的唤端路径"}),isOld(e)&&!isValidRouterPath(r)){var c=isValidRouterPath(r);if(c){if("boolean"!=typeof c){var s=validRouteParams(a,c),u=s.valid,l=s.errKey;u||i.push({errorType:"paramsError",errData:"参数"+l+"错误"})}}else i.push({errorType:"linkError",errData:"无效的全局路由"})}return i}initPaths();var deeplinkCheck=function(e){var n=[];e||n.push("params 'url' or 'type' miss!");try{return n=n.concat(checkDomainPath(e)),{errors:n=isOld(e)?n.concat(checkLoadUrl(e)):n.concat(checkRouterUrl(e)),uri:e}}catch(e){return{errors:[{errData:e.message,errorType:e.type}],uri:null}}},deeplinkChecker=function(e){var n,t,r,o;if(!e)return{result:{errData:"url为空",errorType:"deeplinkError"},pass:!1};try{var a=deeplinkCheck(e);return a.errors.length>0?(null===(n=null===window||void 0===window?void 0:window.DUOTEL)||void 0===n||n.send("deeplink_trace",{url:(null==a?void 0:a.uri)||"",errors:null===(t=null==a?void 0:a.errors)||void 0===t?void 0:t.map((function(e){return e.errData})).join("；"),urlRight:!1}),{result:a,pass:!1}):(null===(r=null===window||void 0===window?void 0:window.DUOTEL)||void 0===r||r.send("deeplink_trace",{url:(null==a?void 0:a.uri)||"",errors:(null===(o=null==a?void 0:a.errors)||void 0===o?void 0:o.map((function(e){return e.errData})).join("；"))||"",urlRight:!0}),{result:a,pass:!0})}catch(e){return console.error(e),!1}},_default=dist.default=deeplinkChecker,BrandName;!function(e){e.huawei="huawei",e.honor="honor",e.redmi="redmi",e.oneplus="oneplus",e.realme="realme",e.iphone="iphone",e.ipad="ipad",e.oppo="oppo",e.vivo="vivo",e.xiaomi="xiaomi",e.samsung="samsung",e.other="other"}(BrandName||(BrandName={}));var brands=[{name:BrandName.huawei,key:"huawei"},{name:BrandName.honor,key:"honor"},{name:BrandName.redmi,key:"redmi"},{name:BrandName.oneplus,key:"oneplus"},{name:BrandName.realme,key:" rmx"},{name:BrandName.iphone,key:"iphone"},{name:BrandName.ipad,key:"ipad"},{name:BrandName.oppo,key:"oppo| [a-z]{4,}00 "},{name:BrandName.vivo,key:"vivo| v\\d{4,}a "},{name:BrandName.xiaomi,key:" mix? | m\\d{4}"},{name:BrandName.samsung,key:"sm-|samsung"}],SystemName;!function(e){e.android="android",e.ios="ios",e.harmony="harmony",e.mac="mac",e.windows="windows"}(SystemName||(SystemName={}));var systems=[{name:SystemName.android,key:"Android"},{name:SystemName.ios,key:"iPhone OS|iPad; CPU OS"},{name:SystemName.harmony,key:"OpenHarmony"},{name:SystemName.mac,key:"Mac OS X"},{name:SystemName.windows,key:"Windows NT"}],BrowserName;!function(e){e.douyin="douyin",e.kuaishou="kuaishou",e.wechat="wechat",e.sougouBrowser="sougouBrowser",e.weibo="weibo",e.bili="bili",e.baidu="baidu",e.firefox="firefox",e.xiaomi="xiaomi",e.huawei="huawei",e.uc="uc",e.opera="opera",e.edge="edge",e.qqBrowser="qqBrowser",e.qq="qq",e.quark="quark",e.xhs="xhs",e.chrome="chrome",e.safari="safari",e.other="other"}(BrowserName||(BrowserName={}));var browsers=[{name:BrowserName.douyin,key:"aweme|aweme app_version"},{name:BrowserName.kuaishou,key:"Kwai|ksNebula"},{name:BrowserName.wechat,key:"MicroMessenger"},{name:BrowserName.sougouBrowser,key:"Sogou"},{name:BrowserName.weibo,key:"Weibo"},{name:BrowserName.bili,key:"BiliApp"},{name:BrowserName.baidu,key:"baiduboxapp"},{name:BrowserName.firefox,key:"Firefox|FxiOS"},{name:BrowserName.xiaomi,key:"MiuiBrowser|mibrowser"},{name:BrowserName.uc,key:"UCBrowser|UWS"},{name:BrowserName.huawei,key:"HuaweiBrowser"},{name:BrowserName.opera,key:"OPT|OPR"},{name:BrowserName.edge,key:"Edgi|edgA"},{name:BrowserName.qqBrowser,key:"MQQBrowser"},{name:BrowserName.qq,key:"QQ"},{name:BrowserName.quark,key:"Quark"},{name:BrowserName.xhs,key:"discover"},{name:BrowserName.chrome,key:"Chrome.*Mobile|CriOS.*Mobile"},{name:BrowserName.safari,key:"iPhone.*Safari|iPad.*Safari"}];function judgeBrand(e){var n={brand:BrandName.other,model:"other"};return brands.find((function(t){return!!getRegExg(t.key).test(e)&&(n.brand=t.name,t.name===BrandName.iphone||t.name===BrandName.ipad?n.model="other":n.model=getVersion(t.key,e),!0)})),n}function uaParser(){var e=navigator.userAgent||"",n={phone_os:"other",os_version:"other",browser_name:BrowserName.other,browser_version:"",m_brand:BrandName.other,m_model:"other"};systems.find((function(t){return!!getRegExg(t.key).test(e)&&(n.phone_os=t.name,n.os_version=getVersion(t.key,e),!0)})),browsers.find((function(t){return!!getRegExg(t.key).test(e)&&(n.browser_name=t.name,n.browser_version=getVersion(t.key,e),!0)}));var t=judgeBrand(e),r=t.brand,o=t.model;return n.m_brand=r,n.m_model=o,n}function getVersionReg(e){var n=e.split("|").map((function(e){return e+"[^0-9]*"})).join("|");return new RegExp("(".concat(n,")(\\d+(?:[._]?\\d?)+)"),"i")}function getRegExg(e){return new RegExp(e,"i")}function getVersion(e,n){var t=getVersionReg(e),r=n.match(t);return r?r[2]||"other":""}var ua="undefined"!=typeof navigator?navigator.userAgent:"",semverCompare=function(e,n){for(var t=window.isNaN,r=(null==e?void 0:e.split("."))||[],o=(null==n?void 0:n.split("."))||[],a=0;a<3;a++){var i=Number(r[a]),c=Number(o[a]);if(i>c)return 1;if(c>i)return-1;if(!t(i)&&t(c))return 1;if(t(i)&&!t(c))return-1}return 0},getWeChatVersion=function(){return(ua.match(/micromessenger\/(\d+\.\d+\.\d+)/i)||[])[1]},isAndroid=/android/i.test(ua),isIos=/iphone|ipad|ipod/i.test(ua),isWechat=/micromessenger\/([\d.]+)/i.test(ua),isMiniProgram="undefined"!=typeof window&&(/miniprogram/i.test(ua)||"miniprogram"===window.__wxjs_environment),isWeibo=/(weibo).*weibo__([\d.]+)/i.test(ua);/(baiduboxapp)\/([\d.]+)/i.test(ua),/(HeyTapBrowser)\/([\d.]+)/i.test(ua),/qq\/([\d.]+)/i.test(ua),/(qqbrowser)\/([\d.]+)/i.test(ua),/qzone\/.*_qz_([\d.]+)/i.test(ua),/safari/i.test(ua)&&/chrome/i.test(ua),/chrome\/[\d.]+ mobile safari\/[\d.]+/i.test(ua)&&isAndroid&&ua.indexOf("Version");var SCENE={home:"/home/HomePage"},MP_SCENE={home:"weixin://dl/business/?t=s9bgPoC8W1h"},DEFAULT_LAND_TYPE="3",isIOS=function(){return/iPhone/i.test(navigator.userAgent)},getLandTypeMap=function(){return{1:"/trend/details",2:"/trend/videoPage",3:"/web/BrowserPage",4:"/product/ProductDetail",6:"/transaction/main",8:"/home/HomePage",9:"/raffle/originalPrice/detail",10:"/trend/postsPage",11:"/raffle/originalPrice/list",12:"/identify/IdentifyDetailsPage",13:"/media/productSearchPhoto",14:"/live/LiveRoomPage",15:"/live/LiveReplayProtratiPage",16:"/trend/UserHomePage",17:"/account/MyCouponPage",18:"/user/scanChristmasTree",19:"/order/buyer/orderList",20:"/order/seller/orderList",21:"/blindBox/HomePage",22:"/product/MultiMakeupsPage",23:"/product/contentGuide",7:isIOS()?"/ar":"/home/HomePage"}};function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function getUUID(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return"".concat(n()+n()).concat(e).concat(n()).concat(e).concat(n()).concat(e).concat(n()).concat(e).concat(n()+n()+n())}function genETID(){return+new Date+"_"+getUUID("_")}function loadJs(e,n){var t=document.createElement("script"),r=document.getElementsByTagName("head")[0],o=!1;t.src=e,"function"==typeof n&&(t.onload=t.onreadystatechange=function(){o||t.readyState&&!/loaded|complete/.test(t.readyState)||(t.onload=t.onreadystatechange=null,o=!0,n())},t.onerror=function(e){console.log("js加载失败",e),n(e)}),r.appendChild(t)}function loadJsAsync(e,n){if(!e||!n)throw new Error("请检查入参");return new Promise((function(t,r){loadJs(e,(function(e){e?r(e):t(window[n])}))}))}function getQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,n=e,t={},r=n.split("?")[1];if(r)for(var o,a,i,c=r.split("&"),s=0,u=c.length;s<u;s++)a=(o=c[s].split("="))[0],i=o[1],t[a]=i;return t}function getQueryString(e,n){return getQuery(n)[e]}function updateUrlByParams(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Reflect.ownKeys(n).forEach((function(t){var r=n[t];if(void 0!==r){var o=getQueryString(t,e);if(o)e=e.replace("".concat(t,"=").concat(o),"".concat(t,"=").concat(r));else{var a="".concat(t,"=").concat(r);e.indexOf("?")>0?e+="&".concat(a):e+="?".concat(a)}}})),e}function parseFuncStr(e){var n="return (()=>{with (this) {return ".concat(e,"}})()");try{return new Function(n).bind(this)()}catch(e){}return function(){}}function getEnv(){var e={test:"test",prod:"prod"},n=window.location.host,t=/\/\/(t[0-9]-|dev\.|localhost)/.test(n)||/((2((5[0-5])|([0-4]\d)))|([0-1]?\d{1,2}))(\.((2((5[0-5])|([0-4]\d)))|([0-1]?\d{1,2}))){3}/.test(n),r=getQueryString("test_env");return r&&e[r]?e[r]:t?e.test:e.prod}function trimObjectValues(e){if("object"!==_typeof$1(e)||null===e)return e;var n={};for(var t in e){var r=e[t];"string"==typeof r?n[t]=r.trim():"object"===_typeof$1(r)&&null!==r?n[t]=trimObjectValues(r):n[t]=r}return n}var YING_YONG_BAO="https://a.app.qq.com/o/simple.jsp?pkgname=com.shizhuang.duapp",COMMON_SHOP="market://details?id=com.shizhuang.duapp",XIAOMI_SHOP="mimarket://details?id=com.shizhuang.duapp",VIVO_SHOP="vivomarket://details?id=com.shizhuang.duapp",HUAWEI_SHOP="appmarket://details?id=com.shizhuang.duapp",appStore="https://itunes.apple.com/cn/app/id1012871328",appStoreSchema="itms-apps://itunes.apple.com/app/id1012871328",HARMONY_SHOP="https://appgallery.huawei.com/app/detail?id=com.dewu.hos",V1_CONF={webConfig:{path:"/web/BrowserPage",key:"loadUrl"},protocol:"dewuapp",scheme:{host:"m.poizon.com/router"},universal:{host:"m.dewu.com/note"}},V2_CONF={webConfig:{key:"routerUrl"},protocol:"dewulink",scheme:{host:"m.dewu.com/note"},universal:{host:"apk.poizon.com/note"}},V2_ROUTER_PREFIX="m.poizon.com/router";function _checkIfV2Scheme(e){var n=V2_CONF.protocol,t=V2_CONF.scheme.host;return 0===e.indexOf("".concat(n,"://").concat(t))}function _checkIfV2Universal(e){var n=V2_CONF.universal.host;return 0===e.indexOf("https://".concat(n))}function _checkIfV1LoadWeb(e){var n=V1_CONF.webConfig.path;return e.indexOf(n)>-1}function _checkIfV1Scheme(e){var n=V1_CONF.protocol,t=V1_CONF.scheme.host;return 0===e.indexOf("".concat(n,"://").concat(t))}function _checkIfV1Universal(e){var n=V1_CONF.universal.host;return 0===e.indexOf("https://".concat(n))}function _checkIfWeb(e){var n=_checkIfV1Universal(e);return(0===e.indexOf("https://")||0===e.indexOf("http://"))&&!n}function getUrlType(e){var n="";return _checkIfV2Scheme(e)?n="v2_scheme":_checkIfV2Universal(e)?n="v2_universal":_checkIfV1LoadWeb(e)?n="v1_load_web":_checkIfV1Scheme(e)?n="v1_scheme":_checkIfV1Universal(e)?n="v1_universal":_checkIfWeb(e)&&(n="web"),n}function addParams2LoadWebUrl(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=V1_CONF.webConfig.key,r=getQueryString(t,e);if(r){var o=decodeURIComponent(r);o=updateUrlByParams(o,n),e=updateUrlByParams(e,_defineProperty$1({},t,o=encodeURIComponent(o)))}return e}var findTargetComponentByAttr=function(e,n){for(var t=e.length,r=0;r<t;r++){if("BODY"===e[r].tagName||"HTML"===e[r].tagName)return null;if(e[r].hasAttribute(n))return e[r]}return null},getPosition=function(e){try{var n=e.getBoundingClientRect();return{top:n.top,left:n.left,width:n.width,height:n.height}}catch(n){return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}};function _classCallCheck$1(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _typeof=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},autoTrackTypeName=function(e){return"data-track-".concat(e)},autoTrackDataFromDataSet=function(e,n){return n["".concat(e,"Tracks")]?JSON.parse(n["".concat(e,"Tracks")]):null},AutoTrack=function(){function e(n){var t=this;_classCallCheck$1(this,e),this.analytics=n,this.checkExposure=function(){if(void 0!==("undefined"==typeof window?"undefined":_typeof(window)))for(var e=autoTrackTypeName("exposure"),n=document.querySelectorAll("[".concat(e,"]")),r=document.documentElement.scrollTop||document.body.scrollTop,o=n.length,a=0;a<o;a++){var i=n[a],c=getPosition(i),s=c.top,u=c.left,l=c.width,d=c.height;if(s<=window.innerHeight+r&&s+d>=r&&u<window.innerWidth&&u+l>=0){var p=i.getAttribute(e);if(p){i.removeAttribute(e);var f,m=i.dataset,h=null!==(f=autoTrackDataFromDataSet("exposure",m))&&void 0!==f?f:m;t.analytics.track(p,h)}}}},this.init()}var n=e.prototype;return n.init=function(){"undefined"!=typeof window&&(this.clickTracker(),this.exposureTracker())},n.clickTracker=function(){var e=this;"undefined"!=typeof window&&(document.body?document.body.addEventListener("click",(function(n){if(n.target){var t=n.composedPath(),r=autoTrackTypeName("click"),o=findTargetComponentByAttr(t,r);if(o){var a=o.getAttribute(r);if(!a)return;var i,c=o.dataset,s=null!==(i=autoTrackDataFromDataSet("click",c))&&void 0!==i?i:c;e.analytics.track(a,s)}}})):console.warn("body不存在"))},n.exposureTracker=function(){var e=this;if("undefined"!=typeof window){var n=6,t=function(){n<=0||setTimeout((function(){n--,e.checkExposure(),t()}),500)};t(),window.addEventListener("scroll",this.checkExposure,!0)}},e}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){_defineProperty(e,n,t[n])}))}return e}function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpreadProps(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function _objectWithoutProperties(e,n){if(null==e)return{};var t,r,o=_objectWithoutPropertiesLoose(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function _objectWithoutPropertiesLoose(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var getNSFromEventName=function(e){var n=e.indexOf("_");return{ns:e.slice(0,n),name:e.slice(n+1)}},addNS2EventName=function(e,n){return"".concat(e,"_").concat(n)},Analytics=function(){function e(){_classCallCheck(this,e),this.trackConfigs={},this.trackInstances=[],this.trackList=[],this.autoTrack=new AutoTrack(this)}var n=e.prototype;return n.use=function(e){this.trackInstances.push(e)},n.addTrackConfig=function(e,n){var t={};return this.trackConfigs[e]=t,Object.keys(n).reduce((function(r,o){return t[o]=n[o],_objectSpreadProps(_objectSpread({},r),_defineProperty({},o,addNS2EventName(e,o)))}),{})},n.track=function(e,n,t){if(!t)if(this.trackInstances.length)for(;this.trackList.length;){var r=this.trackList.shift();this.track(r.eventName,r.dataSet,!0)}else this.trackList.push({eventName:e,dataSet:n});var o=getNSFromEventName(e),a=o.ns,i=o.name,c=this.trackConfigs[a];if(c){var s=c[i],u=!0,l=!1,d=void 0;try{for(var p,f=this.trackInstances[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m,h=p.value,_=null!==(m=s(n,h.name))&&void 0!==m?m:{},v=_.event_name,y=_objectWithoutProperties(_,["event_name"]),g={name:h.name,event:h.beforeHandleEvent?h.beforeHandleEvent(y):y,eventName:null!=v?v:i};h.track(g.eventName,g.event)}}catch(e){l=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw d}}}},n.checkExposure=function(){this.autoTrack.checkExposure()},e}(),analytics=new Analytics;function assign(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}var defaultConverter={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(e,n){function t(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=assign({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+a}}return Object.create({set:t,get:function(n){if("undefined"!=typeof document&&(!arguments.length||n)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var a=t[o].split("="),i=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(r[c]=e.read(i,c),n===c)break}catch(e){}}return n?r[n]:r}},remove:function(e,n){t(e,"",assign({},n,{expires:-1}))},withAttributes:function(e){return init(this.converter,assign({},this.attributes,e))},withConverter:function(e){return init(assign({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}var api=init(defaultConverter,{path:"/"}),CALL_APP_SUCC=1,CALL_APP_FAIL=0,CALL_APP_ALL=-1;function isPlaitObj(e){return"[object Object]"===Object.prototype.toString.call(e)}var generateUrl=function(e){var n="cn-hangzhou.log.aliyuncs.com",t="deeplink-log",r="https://".concat("dw-prd",".").concat(n,"/logstores/").concat(t,"/track?APIVersion=0.6.0");return Object.keys(e).reduce((function(n,t){return"".concat(n,"&").concat(encodeURIComponent(t),"=").concat(isPlaitObj(e[t])?encodeURIComponent(JSON.stringify(e[t])):encodeURIComponent(e[t]))}),r)};function send(e){(new Image).src=e}function logger(e){isPlaitObj(e)?send(generateUrl(e)):console.warn("Track data must be a plaint object!")}var CallAppTracks=analytics.addTrackConfig("call-app",{venue_component_content_exposure:function(e){var n=_objectSpread2({block_type:"3552",current_page:"61",venue_page_url:window.location.href,event_name:"venue_component_content_exposure",browser_name:"",m_brand:"",os_version:"",phone_os:""},e);return _objectSpread2(_objectSpread2({},n),getCommonTrackData())},venue_component_content_click:function(e){var n=e.status,t=e.evokeType,r=e.eTId;return _objectSpread2(_objectSpread2({},{block_type:"3552",event_name:"venue_component_content_click",current_page:"61",venue_page_url:window.location.href,status:n,evokeType:t,browser_name:"",m_brand:"",os_version:"",phone_os:"",eTId:r}),getCommonTrackData())},venue_component_content_common:function(e){return _objectSpread2(_objectSpread2({},isPlaitObj(e)?e:{}),getCommonTrackData())},venue_component_evoke_click:function(e){var n=_objectSpread2({block_type:"3552",event_name:"venue_component_content_click",current_page:"61",venue_page_url:window.location.href,click_type:"evoke_click",browser_name:"",m_brand:"",os_version:"",phone_os:""},e);return _objectSpread2(_objectSpread2({},n),getCommonTrackData())}});function genUnionKey(){try{var e;return window.btoa("undefined"!=typeof performance?String((null===(e=performance.timing)||void 0===e?void 0:e.navigationStart)||performance.timeOrigin):"")+splitStringIntoParts(window.btoa(window.navigator.userAgent)+window.btoa(window.location.href),16).map((function(e){return midStr(e)})).join("")}catch(e){return e.message}}function splitStringIntoParts(e,n){for(var t=[],r=Math.ceil(e.length/n),o=0;o<e.length;o+=r)t.push(e.slice(o,o+r));return t}function midStr(e){return e[Math.floor(e.length/2)]}function getEnvData(e){if(null!=e&&e.lite)return{};var n=uaParser();return{phone_os:n.phone_os,browser_name:n.browser_name,m_brand:n.m_brand}}var getCommonTrackData=function(){return _objectSpread2(_objectSpread2({},getEnvData()),{},{current_url:window.location.href,ua:navigator.userAgent,sk:api.get("sk")||"",unionKey:genUnionKey()})},isTackInit=!1,hidden,visibilityChange,iframe;function track_init(e){return _track_init.apply(this,arguments)}function _track_init(){return(_track_init=_asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!isTackInit){e.next=2;break}return e.abrupt("return");case 2:isTackInit=!0,"dc_init",analytics.track(CallAppTracks.venue_component_content_exposure,n),logger(_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"dc_init",e_type:"dewulink"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function track_evoke(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,i=e.landType,c=void 0===i?"":i,s=e.params,u=void 0===s?{}:s,l=e.nativeParams,d=void 0===l?{}:l,p=e.evokeType,f=void 0===p?"":p,m=e.noNeedScene,h=void 0!==m&&m,_=e.eTId,v=void 0===_?"":_,y=u.loadUrl,g=void 0===y?"":y,b=_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"dc_evoke",url:r,land_url:a,land_type:c,load_url:decodeURIComponent(g),params:u,native_params:d,no_need_scene:h,e_type:n,evokeType:f,eTId:v});analytics.track(CallAppTracks.venue_component_content_click,{status:CALL_APP_ALL,evokeType:f,eTId:v}),logger(b)}function kuaishou_ios_twice(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,i=e.landType,c=void 0===i?"":i,s=e.params,u=void 0===s?{}:s,l=e.nativeParams,d=void 0===l?{}:l,p=e.noNeedScene,f=void 0!==p&&p,m=e.eTId,h=void 0===m?"":m,_=u.loadUrl,v=void 0===_?"":_;logger(_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"kuaishou_ios_twice_evoke",url:r,land_url:a,land_type:c,load_url:decodeURIComponent(v),params:u,native_params:d,no_need_scene:f,e_type:n,eTId:h}))}function track_evoke_success(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,i=e.landType,c=void 0===i?"":i,s=e.params,u=e.nativeParams,l=void 0===u?{}:u,d=e.noNeedScene,p=void 0!==d&&d,f=e.eTId,m=void 0===f?"":f,h=s.loadUrl,_=void 0===h?"":h;analytics.track(CallAppTracks.venue_component_content_click,{status:CALL_APP_SUCC,eTId:m}),logger(_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"dc_evoke_success",e_type:n,url:r,land_url:a,land_type:c,load_url:decodeURIComponent(_),params:s,native_params:l,no_need_scene:p,eTId:m}))}function track_common(e){var n=isPlaitObj(e)?e:{};analytics.track(CallAppTracks.venue_component_content_common,n),logger(_objectSpread2(_objectSpread2({},n),getCommonTrackData()))}function track_evoke_fail(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,i=e.landType,c=void 0===i?"":i,s=e.params,u=e.nativeParams,l=void 0===u?{}:u,d=e.noNeedScene,p=void 0!==d&&d,f=e.eTId,m=void 0===f?"":f,h=s.loadUrl,_=void 0===h?"":h;analytics.track(CallAppTracks.venue_component_content_click,{status:CALL_APP_FAIL,eTId:m}),logger(_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"dc_evoke_fail",e_type:n,url:r,land_url:a,land_type:c,load_url:decodeURIComponent(_),params:s,eTId:m,native_params:l,no_need_scene:p}))}function track_webview_hidden_support(){logger(_objectSpread2(_objectSpread2({},getCommonTrackData()),{},{event_name:"webview_not_support_hidden"}))}function track_evoke_click(e){analytics.track(CallAppTracks.venue_component_evoke_click,e)}function getSupportedProperty(){"undefined"!=typeof document&&(void 0!==document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):void 0!==document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden?(hidden="webkitHidden",visibilityChange="webkitvisibilitychange"):void 0!==document.mozHidden&&(hidden="mozHidden",visibilityChange="mozvisibilitychange"))}function isPageHidden(){return void 0!==hidden&&document[hidden]}function evokeByTopLocation(e){"undefined"!=typeof window&&window.top&&e&&(window.top.location.href=e)}function evokeByLocation(e){"undefined"!=typeof window&&e&&(window.location.href=e)}function addScript(e){var n=document.createElement("script");n.src=e,document.body.appendChild(n)}function evokeByTagA(e){var n=document.createElement("a");n.setAttribute("href",e),n.style.display="none",document.body.appendChild(n),n.click()}function evokeByIFrame(e){iframe||((iframe=document.createElement("iframe")).style.cssText="display:none;border:0;width:0;height:0;",document.body.appendChild(iframe)),iframe.src=e}function checkOpen(e){return new Promise((function(n){var t=setTimeout((function(){n(!1)}),e),r=function(){isPageHidden()&&(n(!0),clearTimeout(t))};void 0!==visibilityChange?(document.removeEventListener(visibilityChange,r),document.addEventListener(visibilityChange,r)):(window.removeEventListener("pagehide",r),window.addEventListener("pagehide",r))}))}function addCdnabtestQuery(e){return e?e.indexOf("?")>-1?"".concat(e,"&cdnabtest=1"):"".concat(e,"?cdnabtest=1"):e}function getOpentagiUrl(){return"test"===getEnv()?"https://t1-m.dewu.net/evoke":"https://fast.dewu.com/evoke"}getSupportedProperty(),"undefined"==typeof window||hidden&&visibilityChange||track_webview_hidden_support();var _excluded$2=["loadUrl"];function combV2Url(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=V2_CONF.protocol,t=V2_CONF.scheme.host,r=V2_CONF.universal.host,o="".concat(n,"://").concat(t,"?routerUrl=").concat(encodeURIComponent(e)),a="https://".concat(r,"?routerUrl=").concat(encodeURIComponent(e));return{scheme:o,universal:a}}function formatUrl$1(e){var n=e.url,t=e.params,r=V1_CONF.protocol,o=V1_CONF.scheme.host,a=V1_CONF.universal.host,i=function(e){return e.replace(o,V2_ROUTER_PREFIX).replace(a,V2_ROUTER_PREFIX)},c="";switch(getUrlType(n)){case"v2_scheme":case"v2_universal":var s=V2_CONF.webConfig.key;if(getQueryString(s,n)){var u=i(n);c=decodeURIComponent(getQueryString(s,u))}break;case"v1_load_web":c=addParams2LoadWebUrl(n,t).replace(new RegExp("^".concat(r,"://")),"https://").replace(o,a);break;case"v1_scheme":case"v1_universal":c=updateUrlByParams(n,t).replace(new RegExp("^".concat(r,"://")),"https://").replace(o,a);break;case"web":c=updateUrlByParams(n,t)}return combV2Url(c=i(c))}function formatLandUrl$1(e){var n,t=e.landUrl,r=e.params,o=void 0===r?{}:r,a=V1_CONF.protocol,i=V1_CONF.scheme.host,c=V1_CONF.universal.host,s=(null==t||null===(n=t.replace(new RegExp("^".concat(a,"://")),"https://"))||void 0===n?void 0:n.replace(c,i))||"";return combV2Url(s=updateUrlByParams(s,o))}function formatLandType$1(e){var n=e.landType,t=e.params,r=void 0===t?{}:t,o=getLandTypeMap(),a=V1_CONF.scheme.host,i=o[n];i||(n=DEFAULT_LAND_TYPE,i=o[DEFAULT_LAND_TYPE]);var c="https://".concat(a).concat(i);if(n+""===DEFAULT_LAND_TYPE){var s=r,u=s.loadUrl,l=_objectWithoutProperties$1(s,_excluded$2),d=u?decodeURIComponent(u):window.location.href;d=updateUrlByParams(d,l),r={loadUrl:encodeURIComponent(d)}}return combV2Url(c=updateUrlByParams(c,r))}function generateScheme$1(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,i=e.nativeParams,c=void 0===i?{}:i,s=V1_CONF.universal.host,u="";if(n)u=formatUrl$1(e).scheme;else if(t&&SCENE[t]){u=combV2Url("https://".concat(s).concat(SCENE[t])).scheme}else if(r&&MP_SCENE[r])u=MP_SCENE[r];else if(o)u=formatLandUrl$1(e).scheme;else if(a)u=formatLandType$1(e).scheme;else{u=combV2Url("").scheme}return u=updateUrlByParams(u,c)}function generateUniversalLink$1(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,i=e.nativeParams,c=void 0===i?{}:i,s=V1_CONF.universal.host,u="";if(n)u=formatUrl$1(e).universal;else if(t&&SCENE[t]){u=combV2Url("https://".concat(s).concat(SCENE[t])).universal}else if(r&&MP_SCENE[r])u=MP_SCENE[r];else if(o)u=formatLandUrl$1(e).universal;else if(a)u=formatLandType$1(e).universal;else{u=combV2Url("").universal}return addCdnabtestQuery(u=updateUrlByParams(u,c))}function generateYingYongBao(e){var n=generateScheme$1(e);return"".concat(YING_YONG_BAO,"&android_schema=").concat(encodeURIComponent(n))}var _excluded$1=["loadUrl"];function formatUrl(e){var n="",t="",r=e.url,o=e.params,a=V1_CONF.protocol,i=V1_CONF.scheme.host,c=V1_CONF.universal.host,s=V1_CONF.webConfig,u=s.path,l=s.key;switch(getUrlType(r)){case"v2_scheme":case"v2_universal":var d=getQueryString(V2_CONF.webConfig.key,r);if(d){var p=decodeURIComponent(d),f=formatUrl(_objectSpread2(_objectSpread2({},e),{},{url:p}));n=f.scheme,t=f.universal}else n="".concat(a,"://").concat(i,"/home/HomePage"),t="https://".concat(c,"/home/HomePage");break;case"v1_load_web":var m=addParams2LoadWebUrl(r,o);n=m.replace("https://","".concat(a,"://")).replace(c,i),t=m.replace("".concat(a,"://"),"https://").replace(i,c);break;case"v1_scheme":case"v1_universal":var h=updateUrlByParams(r,o);n=h.replace(/^https:\/\//,"".concat(a,"://")).replace(c,i),t=h.replace(new RegExp("^".concat(a,"://")),"https://").replace(i,c);break;case"web":var _="".concat(u,"?").concat(l,"=").concat(encodeURIComponent(r));n="".concat(a,"://").concat(i).concat(_),t="https://".concat(c).concat(_)}return{scheme:n,universal:t}}function formatLandUrl(e){var n=e.landUrl,t=e.params,r=void 0===t?{}:t,o=V1_CONF.protocol,a=V1_CONF.scheme.host,i=V1_CONF.universal.host,c=updateUrlByParams(n,r);return{scheme:c.replace(/^https:\/\//,"".concat(o,"://")).replace(i,a),universal:c.replace(new RegExp("^".concat(o,"://")),"https://").replace(a,i)}}function formatLandType(e){var n=e.landType,t=e.params,r=void 0===t?{}:t,o=getLandTypeMap(),a=V1_CONF.protocol,i=V1_CONF.scheme.host,c=V1_CONF.universal.host,s=o[n];s||(n=DEFAULT_LAND_TYPE,s=o[DEFAULT_LAND_TYPE]);var u="".concat(a,"://").concat(i).concat(s),l="https://".concat(c).concat(s);if(n+""===DEFAULT_LAND_TYPE){var d=r,p=d.loadUrl,f=_objectWithoutProperties$1(d,_excluded$1),m=p?decodeURIComponent(p):window.location.href;m=updateUrlByParams(m,f),r={loadUrl:encodeURIComponent(m)}}return{scheme:u=updateUrlByParams(u,r),universal:l=updateUrlByParams(l,r)}}function generateScheme(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,i=e.nativeParams,c=void 0===i?{}:i,s=V1_CONF.scheme.host;return updateUrlByParams(n?formatUrl(e).scheme:t&&SCENE[t]?"dewuapp://".concat(s).concat(SCENE[t]):r&&MP_SCENE[r]?MP_SCENE[r]:o?formatLandUrl(e).scheme:a?formatLandType(e).scheme:"dewuapp://".concat(s).concat(SCENE.home),c)}function generateUniversalLink(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landType,a=e.landUrl,i=e.nativeParams,c=void 0===i?{}:i,s=V1_CONF.universal.host;return updateUrlByParams(n?formatUrl(e).universal:t&&SCENE[t]?"https://".concat(s).concat(SCENE[t]):r&&MP_SCENE[r]?MP_SCENE[r]:a?formatLandUrl(e).universal:o?formatLandType(e).universal:"https://".concat(s).concat(SCENE.home),c)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function promiseWrap(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,null]}))}function getPageEnv(){return"undefined"==typeof window||window.location.href.split("?")[0].includes(".com")?"prod":"test"}var xhr="function"==typeof XMLHttpRequest?new XMLHttpRequest:null,urlMap={prod:"https://cdn-config.dewu.com/node-common/configCenter/toufang/h5-ssr-rule.json",test:"https://cdn-config.dewu.com/node-common/t1/configCenter/toufang/h5-ssr-rule.json"};function requestConfig(e){if(!xhr)throw new Error("不在浏览器环境");return urlMap[e]||(e="prod"),xhr.open("GET","".concat(urlMap[e])),new Promise((function(e,n){xhr.onreadystatechange=function(t){if(xhr.readyState===XMLHttpRequest.DONE&&200===xhr.status)try{var r=JSON.parse(xhr.response).data;e(JSON.parse(r))}catch(e){n(e)}},xhr.send()}))}function getAppInfo(){return _getAppInfo.apply(this,arguments)}function _getAppInfo(){return(_getAppInfo=_asyncToGenerator(regenerator.mark((function e(){var n,t,r,o,a,i,c,s,u;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,promiseWrap(requestConfig(getPageEnv()));case 2:return n=e.sent,(t=_slicedToArray(n,2))[0],r=t[1],a=(o=null!=r?r:{}).app_version,i=o.rule_url,c=o.permissions_url,s=o.function_url,u=o.update_time,e.abrupt("return",r?{app_version:a,rule_url:i,permissions_url:c,function_url:s,update_time:u}:null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mask=function(){return{htmlContent:'<div class="wx_mask_container" onclick="try{_$hideMaskHtmlString()}catch{}">\n        <div class="wx_mask_bg"></div>\n        <div class="wx_mask_pop_container">\n            <div class="wx_mask_triangle"></div>\n            <div class="wx_mask_content">\n            <span>点击右上角...按钮<br />\n                选择在浏览器打开\n            </span>\n            </div>\n        </div>\n    </div>',cssContent:".wx_mask_container {\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 99999;\n    }\n    .wx_mask_bg {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.4);\n    }\n    .wx_mask_pop_container {\n        position: absolute;\n        top: 2.1vw;\n        right: 4vw;\n    }\n    .wx_mask_triangle {\n        width: 3.2vw;\n        height: 2.1vw;\n        margin-left: 27vw;\n        background-image: url('https://cdn.poizon.com/node-common/35d16d33656144264632dc5179e40a92.png');\n        background-size: 100% 100%;\n    }\n    .wx_mask_content {\n        width: 32vw;\n        height: 11.2vw;\n        padding-top: 1.6vw;\n        font-family: PingFang SC;\n        font-size: 3.2vw;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 4.8vw;\n        text-align: center;\n        color: #ffffff;\n        background-color: #01c2c3;\n    }"}},loading={cssContent:'.lds-roller {\n        display: inline-block;\n        position: fixed;\n        left: 50%;\n        top: 50%;\n        transform: translate3d(-50%, -50%, 0);\n        width: 80px;\n        height: 80px;\n        z-index: 99999;\n      }\n      .lds-roller div {\n        animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        transform-origin: 40px 40px;\n      }\n      .lds-roller div:after {\n        content: " ";\n        display: block;\n        position: absolute;\n        width: 7px;\n        height: 7px;\n        border-radius: 50%;\n        background-color: #01c2c3;\n        opacity: 0.4;\n        margin: -4px 0 0 -4px;\n      }\n      .lds-roller div:nth-child(1) {\n        animation-delay: -0.036s;\n      }\n      .lds-roller div:nth-child(1):after {\n        top: 63px;\n        left: 63px;\n      }\n      .lds-roller div:nth-child(2) {\n        animation-delay: -0.072s;\n      }\n      .lds-roller div:nth-child(2):after {\n        top: 68px;\n        left: 56px;\n      }\n      .lds-roller div:nth-child(3) {\n        animation-delay: -0.108s;\n      }\n      .lds-roller div:nth-child(3):after {\n        top: 71px;\n        left: 48px;\n      }\n      .lds-roller div:nth-child(4) {\n        animation-delay: -0.144s;\n      }\n      .lds-roller div:nth-child(4):after {\n        top: 72px;\n        left: 40px;\n      }\n      .lds-roller div:nth-child(5) {\n        animation-delay: -0.18s;\n      }\n      .lds-roller div:nth-child(5):after {\n        top: 71px;\n        left: 32px;\n      }\n      .lds-roller div:nth-child(6) {\n        animation-delay: -0.216s;\n      }\n      .lds-roller div:nth-child(6):after {\n        top: 68px;\n        left: 24px;\n      }\n      .lds-roller div:nth-child(7) {\n        animation-delay: -0.252s;\n      }\n      .lds-roller div:nth-child(7):after {\n        top: 63px;\n        left: 17px;\n      }\n      .lds-roller div:nth-child(8) {\n        animation-delay: -0.288s;\n      }\n      .lds-roller div:nth-child(8):after {\n        top: 56px;\n        left: 12px;\n      }\n      @keyframes lds-roller {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n    }',htmlContent:'\n      <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n    '},toast={htmlContent:'\n        <div class="mini_toast">小程序内无法跳转App<br/>请直接打开得物App</div>',cssContent:".mini_toast {\n        position: fixed;\n        left: 50%;\n        top: 30vh;\n        transform: translate(-50%, 0);\n        height: 40px;\n        z-index: 99999;\n        background-color: rgba(24, 24, 24, 0.7);\n        color: #fff;\n        text-align: center;\n        padding: 6px;\n        border-radius: 6px;\n        display: flex;\n        align-items: center;\n    }"},downloadModal=function(e){var n=e.closeId,t=e.confirmId,r=e.app_version,o=e.rule_url,a=e.permissions_url,i=e.function_url,c=e.update_time;return{htmlContent:'<div><div class="download_mask_bg"></div><div class="download_container">\n        <img class="download_close" id="'.concat(n,'" src="https://cdn.poizon.com/node-common/b0f2107e-b16a-e597-aab4-de912205e79b-20-20.png" />\n        <div class="download_title">下载得物APP</div>\n        <div class="download_content">\n          <img class="download_icon" src="https://cdn.poizon.com/node-common/653be264-278b-3470-e075-34c3666b16fd-60-60.png" />\n          <div class="download_text">\n            <div class="download_text_title">得物-得到运动x潮流x好物</div>\n            <div class="download_text_info">\n            开发者：上海得物信息集团有限公司  <a href="').concat(o,'">隐私政策</a>｜<a href="').concat(a,'">权限列表</a>｜<a href="').concat(i,'">产品功能</a>  版本:').concat(r,"  更新时间:").concat(c||"2023.11.02",'\n            </div>\n          </div>\n        </div>\n        <button class="download_button" id="').concat(t,'">下载安装包</button>\n    </div></div>'),cssContent:".download {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      top: 0;\n    }\n    .download_container {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 260px;\n      box-sizing: border-box;\n      z-index: 99999;\n      background-color: #fff;\n      padding: 0 12px 34px;\n      border-radius: 12px 12px 0 0;\n    }\n    .download_title {\n      padding: 20px;\n      color: #14151A;\n      text-align: center;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      line-height: 20px;\n    }\n    .download_close {\n      position: absolute;\n      right: 20px;\n      width: 20px;\n      height: 20px;\n      top: 20px;\n    }\n    .download_mask_bg {\n        position: absolute;\n        left: 0;\n        top: 0;\n        z-index: 999;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.4);\n    }\n    .download_content {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 27px;\n    }\n    .download_icon {\n      width: 60px;\n      height: 60px;\n      margin-right: 10px;\n    }\n    .download_text_title {\n      color: #000;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      line-height: 20px;\n      margin-bottom: 6px;\n    }\n    .download_text_info {\n      color: #7F7F8E;\n      font-family: PingFang SC;\n      font-size: 11px;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 18px;\n    }\n    .download_button {\n      width: 100%;\n      height: 44px;\n      line-height: 44px;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      text-align: center;\n      margin: 0;\n      padding: 0;\n      border-radius: 2px;\n      color: #fff;\n      background: #01C2C3;\n      box-sizing: border-box;\n      border: none;\n    }"}},flag="",showHtml=function(e){var n=e.htmlContent,t=e.cssContent;if(flag!==n){flag=n;var r=document.createElement("style");r.innerHTML=t;var o=document.createElement("div");return o.innerHTML=n,document.body.appendChild(r),document.body.appendChild(o),function(){try{flag="",o&&o.parentNode&&o.parentNode.removeChild(o),r&&r.parentNode&&r.parentNode.removeChild(r)}catch(e){}}}},showMask=function(){window._$hideMaskHtmlString=showHtml(mask())},showLoading=function(){return showHtml(loading)},showToast=function(){var e=showHtml(toast),n=setTimeout((function(){null==e||e(),clearTimeout(n)}),2e3)},showDownload=function(){var e=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o,a,i,c;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getAppInfo();case 2:o=e.sent,a=Math.random().toString(),i=Math.random().toString(),c=showHtml(downloadModal(_objectSpread2(_objectSpread2({},o),{},{closeId:a,confirmId:i}))),null===(t=document.getElementById(a))||void 0===t||t.addEventListener("click",c),null===(r=document.getElementById(i))||void 0===r||r.addEventListener("click",n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function isEmpty(e){return"number"!=typeof e&&"boolean"!=typeof e&&(void 0===e||(e instanceof Array?0===e.length:0===Object.keys(e).length))}function removeEmpty(e){return e?Object.keys(e).reduce((function(n,t){return isEmpty(e[t])||(n[t]=e[t]),n}),{}):e}var evokeMap$1={aTag:evokeByTagA,iframe:evokeByIFrame,location:evokeByLocation,topLocation:evokeByTopLocation,mask:function(){return showMask(),!0}};function toYingYongBao(e){evokeByTagA(e)}function toAppStoreDelay(){if(isAndroid)toAppStore();else var e=setTimeout((function(){toAppStore(),clearTimeout(e)}),500)}function toAppStore(e){var n=uaParser(),t=n.m_brand,r=n.browser_name,o=n.phone_os,a="dewu.com"===window.location.hostname;if(isIos){if(isWeibo)return evokeMap$1.mask();if(r!==BrowserName.wechat)return void evokeByTagA(e||appStore);checkOpen(1e3).then((function(e){e||showMask()}))}else{if(o===SystemName.harmony)return void evokeByTagA(e||HARMONY_SHOP);if(isAndroid){if(r===BrowserName.wechat)return void evokeByTagA("".concat(YING_YONG_BAO,"&android_schema=").concat(encodeURIComponent(e)));if(r===BrowserName.bili){var i=window.location.href.indexOf("utm_medium=bili_KOC")>-1;return void(window.location.href.indexOf("media=bili")>-1&&!i?evokeByTagA("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_bilikol.apk"):i&&evokeByTagA("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_bili8.apk"))}if(r===BrowserName.douyin)return void evokeByTagA("https://apps.bytesfield.com/download/extend/cur/cb48526151b23c0e4a2d7cdfbdc8515c523e2864/douyin_ad30");if(r===BrowserName.kuaishou)return void evokeByTagA(COMMON_SHOP);if(r===BrowserName.baidu)return void showDownload((function(){evokeByTagA("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_sqbaidu.apk")}));if(a||r===BrowserName.chrome)return void showDownload((function(){evokeByTagA("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_du.apk")}));if(t===BrandName.xiaomi)return void evokeByTagA("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_du.apk")}}evokeByTagA(e||COMMON_SHOP)}function createParamsForUniversalPage(e){var n=e.url,t=e.landType,r=e.landUrl,o=e.params,a=e.nativeParams,i=removeEmpty({url:n,landType:t,landUrl:r,params:o,nativeParams:a});return i.url&&(i.url=encodeURIComponent(i.url)),i.landUrl&&(i.landUrl=encodeURIComponent(i.landUrl)),i.params&&(i.params=encodeURIComponent(JSON.stringify(o))),i.nativeParams&&(i.nativeParams=encodeURIComponent(JSON.stringify(a))),i}function createFullUniPage(e,n){return updateUrlByParams(e,createParamsForUniversalPage(n))}function directToOpentagPage(e){var n=getOpentagiUrl();createFullUniPage(n,e);var t=generateUniversalLink$1(e).split("?")[1];console.log("haha",generateUniversalLink$1(e)),window.location.href=n+"?"+t+"&opentag=1"}var DEFAULT_TIMEOUT=2500,STOP_TIMEOUT=1e7,kuaishou_ios={clicked:!1},toAppStoreTrack=function(e,n){track_common({type:e,os:n,currentPage:window.location.href,strategyName:localStorage.getItem("strategy")||"",isLowDevice:localStorage.getItem("isLowEndMachine")||""})},_getQuery=getQuery(),fromXhsJump=_getQuery.fromXhsJump,defaultFailAction=function(){var e=_asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return evokeByTopLocation(n),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function getStrategys(){return[{phone_os:SystemName.harmony,os_version:[],m_brand:[],browser_name:[BrowserName.wechat],evokeType:"mask",useScheme:!0},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.wechat],evokeType:"opentag",useScheme:!0},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.wechat],evokeType:-1===semverCompare(getWeChatVersion(),"7.0.5")?"mask":"topLocation",useScheme:!1},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.weibo],evokeType:"mask",useScheme:!1},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.weibo],evokeType:"mask",useScheme:!0},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.kuaishou],evokeType:"topLocation",useScheme:!kuaishou_ios.clicked,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreTrack("kuaishou","ios"),toAppStoreDelay(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.kuaishou],evokeType:"topLocation",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreTrack("kuaishou","android"),toAppStoreDelay(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.bili],evokeType:"location",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.bili],evokeType:"location",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.douyin],evokeType:"topLocation",useScheme:!(navigator.userAgent.toLowerCase().indexOf("bullet")>-1),failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreTrack("douyin","ios"),toAppStoreDelay(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.douyin],evokeType:"aTag",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreTrack("douyin","android"),toAppStoreDelay(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.qq],evokeType:"aTag",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.safari],evokeType:"topLocation",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.xhs],evokeType:"topLocation",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[],evokeType:"topLocation",useScheme:Boolean(fromXhsJump),failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.ios,os_version:[],m_brand:[],browser_name:[BrowserName.chrome],evokeType:"topLocation",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[BrowserName.baidu],evokeType:"aTag",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:SystemName.android,os_version:[],m_brand:[],browser_name:[],evokeType:"iframe",useScheme:!0,failActions:[_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toAppStoreDelay(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]}].map((function(e){return _objectSpread2(_objectSpread2({},e),{},{failActions:[].concat(_toConsumableArray(e.failActions||[]),[defaultFailAction])})}))}
/**
   * 这个函数用来给策略排序，osVersion,m_brand,platform这三个字段非空越多，说明优先级越高，比如：
   * {
   *    os_version: [],
   *    m_brand: [],
   *    browser_name: ['safari'],
   *  },
   *  大于
   *  {
   *    os_version: [],
   *    m_brand: [],
   *    browser_name: [],
   *  },
   *
   * @param strategys
   * @returns
   */function sortStrategyByWeight(e){return e.sort((function(e,n){return Math.min(e.os_version.length,1)+Math.min(e.m_brand.length,1)+Math.min(e.browser_name.length,1)<=Math.min(n.os_version.length,1)+Math.min(n.m_brand.length,1)+Math.min(n.browser_name.length,1)?1:-1}))}function getEvokeType(){for(var e=uaParser(),n=e.browser_name,t=e.m_brand,r=e.os_version,o=e.phone_os,a=sortStrategyByWeight(getStrategys()),i=0;i<a.length;i++){var c=a[i];if((!c.m_brand.length||c.m_brand.includes(t))&&c.phone_os===o.toLocaleLowerCase()&&(!c.browser_name.length||c.browser_name.includes(n))&&(!c.os_version.length||c.os_version.includes(r)))return{evokeType:c.evokeType,useScheme:c.useScheme,failActions:c.failActions||[]}}return{evokeType:"topLocation",useScheme:!0,failActions:[defaultFailAction]}}var defaultConfig={env:"browser",title:"",timeout:DEFAULT_TIMEOUT};function getGlobalConfig(){return defaultConfig}var version="0.3.5",times=0,time=Date.now(),MAX_TIMES=17;function setupDebugger(e){return _setupDebugger.apply(this,arguments)}function _setupDebugger(){return(_setupDebugger=_asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!window.location.href.includes("&debug=1")||!window.location.href.includes("spuId=1206358")||window.VConsole){e.next=8;break}return e.next=6,loadJsAsync("https://unpkg.com/vconsole@latest/dist/vconsole.min.js","VConsole");case 6:new(0,e.sent);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:if(n){e.next=14;break}return e.abrupt("return");case 14:window.removeEventListener("touchstart",triggleDebugger),MAX_TIMES=n||MAX_TIMES,window.addEventListener("touchstart",triggleDebugger);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var evokeMap={a:evokeByTagA,iframe:evokeByIFrame,href:evokeByLocation,topHref:evokeByTopLocation};function triggleDebugger(){var e=Date.now();if(e-time<500?times++:times=0,time=e,times>MAX_TIMES&&!document.getElementById("__DEBUGGER__TEXTAREA__")){var n=new Date(Date.now()+9e5).toUTCString();document.cookie="dw_edge_er_cookie=xxjwazg;domain=.dewu.com;path=/;expires=".concat(n),addDebuggerHtml()}}function addDebuggerHtml(){window.setGrey=function(){addScript("https://cdn-jumper.dewu.com/sdk-linker/du-callapp.js?erQueryDeid=xxjwazg")},window.startEval=function(){var textarea=document.getElementById("__DEBUGGER__TEXTAREA__");eval(textarea.value)},window.setTriggleType=function(e){var n,t=document.getElementById("__DEBUGGER__TEXTAREA__");null===(n=evokeMap[e])||void 0===n||n.call(evokeMap,t.value)},window.setShopHref=function(e){document.getElementById("__DEBUGGER__TEXTAREA__").value=e},window._$showUa=function(){document.getElementById("__DEBUGGER__TEXTAREA__").value=navigator.userAgent},window._$showUaParse=function(){document.getElementById("__DEBUGGER__TEXTAREA__").value=JSON.stringify(window.$_callapp.uaParser())},window._$showVersion=function(){document.getElementById("__DEBUGGER__TEXTAREA__").value=version},window._$showHref=function(){document.getElementById("__DEBUGGER__TEXTAREA__").value=window.location.href},window._$hideDebuggerHtmlString=showHtml({htmlContent:'\n    <div class="__DEBUGGER__MASK__">\n      <button class="__CLOSE__BUTTON__" onclick="try{_$hideDebuggerHtmlString()}catch{}">关闭</button>\n      <textarea id="__DEBUGGER__TEXTAREA__" placeholder="请输入要跳转的地址" rows="5"></textarea>\n      <button class="__DEBUGGER__BUTTON__" onclick="setGrey()">使用最新灰度js</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="startEval()">执行脚本</button>\n      <div class="__DEBUGGER__TRIGGLE__ __DEBUGGER__BASE">\n        <button class="__DEBUGGER__BUTTON__" onclick="setTriggleType(\'iframe\')">Iframe</button>\n        <button class="__DEBUGGER__BUTTON__" onclick="setTriggleType(\'a\')">A标签</button>\n        <button class="__DEBUGGER__BUTTON__" onclick="setTriggleType(\'href\')">href</button>\n        <button class="__DEBUGGER__BUTTON__" onclick="setTriggleType(\'topHref\')">top.href</button>\n      </div>\n      <div class="__DEBUGGER__SHOP__ __DEBUGGER__BASE">\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'\')">清空</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="_$showUa()">显示UA</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="_$showUaParse()">ua解析结果</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="_$showVersion()">当前SDK版本</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="_$showHref()">当前页面地址</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'dewulink://m.dewu.com/note\')">得物schema</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'https://apk.poizon.com/note\')">得物universal link</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'pinduoduo://com.xunmeng.pinduoduo\')">拼嘻嘻schema</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'https://app.yangkeduo.com/universal-link\')">拼嘻嘻universal link</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\''.concat(COMMON_SHOP,'\')">安卓默认商店</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(appStore,'\')">苹果应用商店</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(appStoreSchema,'\')">苹果应用商店scheme</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(XIAOMI_SHOP,'\')">小米商店</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(HUAWEI_SHOP,'\')">华为商店</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(VIVO_SHOP,'\')">vivo商店</button>\n      <button class="__DEBUGGER__BUTTON__" onclick="setShopHref(\'').concat(YING_YONG_BAO,"')\">应用宝</button>\n      </div>\n    </div>\n    "),cssContent:"\n    .__DEBUGGER__MASK__ {\n      padding: 38px 8px 8px;\n      position: fixed;\n      z-index: 99999;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      color: #891;\n      background-color: rgba(0,0,0,0.8);\n      font-size: 24px;\n    }\n    #__DEBUGGER__TEXTAREA__ {\n      width: 100%;\n      background-color: #000;\n      color: #fff;\n      border: 1px solid #4cebe5;\n      border-radius: 4px;\n      resize: none;\n      margin: 0;\n      padding: 0;\n    }\n    .__DEBUGGER__BASE {\n      border: 1px solid #fff;\n      border-radius: 4px;\n      padding: 20px;\n      height: 180px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-wrap: wrap;\n      margin-top: 20px;\n      overflow: auto;\n    }\n    .__DEBUGGER__SHOP__ {\n    }\n    .__DEBUGGER__TRIGGLE__ {\n    }\n    .__DEBUGGER__BUTTON__ {\n      background: transparent;\n      border: 1px solid #4cebe5;\n      color: #fff;\n      padding: 2px;\n      margin: 0;\n      margin-right: 4px;\n      margin-bottom: 4px;\n      width: 120px;\n    }\n    .__CLOSE__BUTTON__ {\n      float: right;\n      background: transparent;\n      border: 1px solid #4cebe5;\n      border-radius: 20px;\n      color: #fff;\n      padding: 6px;\n      height: 40px;\n      width: 60px;\n    }\n    "})}var isDuappBrowser="undefined"!=typeof window&&/duapp/.test(navigator.userAgent),sensors,sensorThread;function initSensor(e){if(!isDuappBrowser)return window.sensorsDataAnalytic201505||sensorThread?(console.info(window.sensorsDataAnalytic201505,"sensor 1"),void(sensors=window.sensorsDataAnalytic201505)):void(sensorThread=loadJsAsync("https://cdn.dewu.com/node-common/38e2c5d483d006ad23170d8e8ec165cc.min","sensorsDataAnalytic201505").then((function(n){sensors=n,console.info(n,"sensor 2"),sensors.init({server_url:"https://sensors.dewu.com/sa?project=".concat("prod"!==e?"default":"production"),is_track_single_page:!0,show_log:"prod"!==e,heatmap:{clickmap:"default",scroll_notice_map:"not_collect"}})})))}function addData(e){return e}var sensorsTrackInstance={name:"sensors",beforeHandleEvent:function(e){return addData(e)},track:function(e,n){return n.event&&(e=n.event,delete n.event),new Promise(function(){var t=_asyncToGenerator(regenerator.mark((function t(r){return regenerator.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sensors){t.next=3;break}return t.next=3,sensorThread;case 3:sensors.track(e,n,(function(){return r({})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},sensorTrackInit=function(e){initSensor(e),analytics.use(sensorsTrackInstance)};function mergeBeforeAfter(){for(var e=[],n=[],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.forEach((function(t){if(t){var r=t.before,o=t.after;r&&(e=e.concat(r)),o&&(n=n.concat(o))}})),{before:e,after:n}}function xhsStrategy(){var e=uaParser().phone_os,n=getQuery().xhsJump;n&&"ios"===e&&(window.location.href=updateUrlByParams(decodeURIComponent(n),{fromXhsJump:"1"}))}var _excluded=["forceGlobalConfig"],_excluded2=["loadUrl"],_excluded3=["navControl","action","koc","source"];function injectEnvToParams(e){var n=getQuery(window.location.href),t=n.eFrom,r=n.eTId,o=t||encodeURIComponent(window.location.href);return e.lite||(e.nativeParams=_objectSpread2(_objectSpread2({},e.nativeParams),{},{eFrom:o,eTId:r||localStorage.getItem("eTId")},getEnvData(e))),_objectSpread2({},e)}var CallApp=function(){function e(n){var t=this;_classCallCheck$2(this,e),_defineProperty$1(this,"options",void 0),_defineProperty$1(this,"isInit",!1),_defineProperty$1(this,"eTId",genETID()),_defineProperty$1(this,"evokeTypeMap",_objectSpread2(_objectSpread2({},evokeMap$1),{},{mask:function(){showMask(),t.stopEvoke()},opentag:function(e,n){var r=window.location.href.includes("m.dewu.com/evoke");isWechat&&isAndroid&&r?(showMask(),t.stopEvoke()):(setTimeout((function(){directToOpentagPage(n)}),150),track_evoke_click({eTId:t.eTId}))}}));var r={timeout:DEFAULT_TIMEOUT,type:"dewulink"};localStorage.setItem("eTId",this.eTId),this.options=_objectSpread2(_objectSpread2({},r),n),sensorTrackInit(n.env||"prod"),setTimeout((function(){t.initOptions(r,n)}),10),xhsStrategy()}var n,t,r,o,a,i,c;return _createClass(e,[{key:"injectEnvToParams",value:function(e){var n=getQuery(window.location.href),t=n.eFrom,r=n.eTId,o=t||encodeURIComponent(window.location.href);return e.lite||(e.nativeParams=_objectSpread2(_objectSpread2({},e.nativeParams),{},{eFrom:o,eTId:r||this.eTId},getEnvData(e))),_objectSpread2({},e)}},{key:"toYingYongBao",value:function(e){toYingYongBao(generateYingYongBao(e))}},{key:"initOptions",value:function(e,n){var t=n.forceGlobalConfig,r=_objectWithoutProperties$1(n,_excluded),o=t||getGlobalConfig();this.options=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},e),r),o),mergeBeforeAfter(o,r,this.options)),this.options.type=this.options.type||"dewulink",console.log("this.options",this.options),setupDebugger(20),track_init({eTId:this.eTId}),this.isInit=!0}},{key:"setOptions",value:function(e){this.options=_objectSpread2(_objectSpread2(_objectSpread2({},this.options),e),mergeBeforeAfter(this.options,e))}},{key:"checkOpen",value:(c=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o,a,i,c,s;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,r=t.timeout,o=t.type,a=!1,r===STOP_TIMEOUT){e.next=11;break}return i=showLoading(),e.next=6,checkOpen(DEFAULT_TIMEOUT);case 6:c=e.sent,i&&i(),s=_objectSpread2(_objectSpread2({type:o},n),{},{eTId:this.eTId}),c?track_evoke_success(s):track_evoke_fail(s),a=!c;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"checkAndExec",value:(i=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=regenerator.mark((function e(r){var o,a,i,c,s,u,l,d,p,f,m;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n[r],a=o.check,i=o.exec,c=!0,u=(s=a||{}).query,l=s.func,u&&(d=getQuery(),Object.keys(u).some((function(e){return d[e]!==u[e]+""&&(c=!1),!c}))),!c||"function"!=typeof l){e.next=10;break}return e.next=7,l();case 7:c=e.sent,e.next=15;break;case 10:if(!c||"string"!=typeof l){e.next=15;break}return p=parseFuncStr(l),e.next=14,p();case 14:c=e.sent;case 15:if(!c||!i){e.next=35;break}if(f=i.url,m=i.func,!f){e.next=22;break}t=!1,window.location.href=f,e.next=34;break;case 22:if("string"!=typeof m){e.next=29;break}return e.next=25,parseFuncStr(m)();case 25:!1===e.sent&&(t=!1),e.next=34;break;case 29:if("function"!=typeof m){e.next=34;break}return e.next=32,m();case 32:!1===e.sent&&(t=!1);case 34:return e.abrupt("return","break");case 35:case"end":return e.stop()}}),e)})),o=0;case 3:if(!(o<n.length)){e.next=11;break}return e.delegateYield(r(o),"t0",5);case 5:if("break"!==e.t0){e.next=8;break}return e.abrupt("break",11);case 8:o++,e.next=3;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"beforeEvoke",value:(a=_asyncToGenerator(regenerator.mark((function e(){var n,t,r;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,!(r=(null===(n=this.options)||void 0===n?void 0:n.before)||!1)){e.next=6;break}return e.next=5,this.checkAndExec(r);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"afterEvoke",value:(o=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,r=mergeBeforeAfter(n,this.options),!(o=r.after).length){e.next=6;break}return e.next=5,this.checkAndExec(o);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"stopEvoke",value:function(){this.options.timeout=STOP_TIMEOUT}},{key:"formatConfig",value:function(e){if(!e)return e;var n=e.landType,t=e.params;return"8"!==String(n)||null!=t&&t.home?t?_objectSpread2(_objectSpread2({},e),{},{params:trimObjectValues(t)}):e:_objectSpread2(_objectSpread2({},e),{},{params:_objectSpread2(_objectSpread2({},t),{},{home:"mall"})})}},{key:"tempHandlePoplayer",value:function(e){var n=e.params||{},t=n.loadUrl,r=_objectWithoutProperties$1(n,_excluded2),o=decodeURIComponent(t||"");if(o.indexOf("/h5-growth/wish-tree?navControl=1&action=waterTask&koc=1&source=szytest")>-1){var a=getQuery(o),i=a.navControl,c=a.action,s=a.koc,u=a.source,l=_objectWithoutProperties$1(a,_excluded3),d=o.split("?")[0];return _objectSpread2(_objectSpread2({},e),{},{params:{loadUrl:encodeURIComponent(updateUrlByParams(d,{navControl:i,action:c,koc:s,source:u}))},nativeParams:_objectSpread2(_objectSpread2(_objectSpread2({},r),l),e.nativeParams)})}return e}},{key:"evoke",value:(r=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o,a,i,c,s,u,l,d,p,f;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tempHandlePoplayer(this.formatConfig(n)),!isMiniProgram){e.next=5;break}return showToast(),this.stopEvoke(),e.abrupt("return");case 5:if(r=getEvokeType(),o=r.evokeType,a=r.useScheme,i=r.failActions,t.nativeParams=t.nativeParams||{},c=generateScheme$1(t),s=generateUniversalLink$1(t),(u=["mask","opentag"]).includes(o)||track_evoke(_objectSpread2(_objectSpread2({eTId:this.eTId},n),{},{type:this.options.type,evokeType:o})),l=uaParser(),d=l.browser_name,p=l.phone_os,kuaishou_ios.clicked&&"ios"===p&&d===BrowserName.kuaishou&&kuaishou_ios_twice(_objectSpread2(_objectSpread2({eTId:this.eTId},n),{},{type:this.options.type})),f=this.checkUrl(a?c:s),console.log("schemeURL",c),console.log("universalLink",s),console.log("evokeUrl",f),this.evokeTypeMap[o](f,n),"ios"===p&&d===BrowserName.kuaishou&&(kuaishou_ios.clicked=!0),u.includes(o)){e.next=21;break}return e.abrupt("return",{universalLink:s,schemeURL:c,failActions:i});case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleErrors",value:function(e){var n={};return null!=e&&e.find((function(e){return"paramsError"===e.errorType&&"参数spuId错误"===e.errData}))&&(n.spuIdError=!0),n}},{key:"checkUrl",value:function(e){try{var n=_default(e);if(n&&!n.pass){var t,r,o,a,i,c=this.handleErrors(n.result.errors).spuIdError;if(null===(t=window.DUOTEL)||void 0===t||t.send("deeplink_error",{type:"errorlink",url:e,currentPage:window.location.href,errorType:null===(r=n.result)||void 0===r||null===(o=r.errors)||void 0===o?void 0:o.map((function(e){return e.errorType})).join("；"),errorData:null===(a=n.result)||void 0===a||null===(i=a.errors)||void 0===i?void 0:i.map((function(e){return e.errData})).join("；")}),c)return e.startsWith("https")?"https://apk.dewu.com/note":"dewulink://m.dewu.com/note"}return e}catch(n){var s;return null===(s=window.DUOTEL)||void 0===s||s.send("deeplink_error",{type:"errorCode",url:e,currentPage:window.location.href,errorData:n.message}),e}}},{key:"open",value:(t=_asyncToGenerator(regenerator.mark((function e(n){var t,r,o,a,i;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.noNeedScene){e.next=3;break}return e.abrupt("return");case 3:return n=this.injectEnvToParams(n),e.next=6,this.beforeEvoke();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.evoke(n);case 11:if(t=e.sent){e.next=14;break}return e.abrupt("return");case 14:return t.universalLink,r=t.failActions,e.next=17,this.checkOpen(n);case 17:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,this.afterEvoke(n);case 22:if(e.sent){e.next=25;break}return e.abrupt("return");case 25:if(o=generateUniversalLink$1(n),null!=r&&r.length){e.next=28;break}return e.abrupt("return");case 28:a=0;case 29:if(!(a<r.length)){e.next=41;break}return i=r[a],e.next=33,i(o);case 33:if(!e.sent){e.next=37;break}return e.abrupt("continue",38);case 37:return e.abrupt("return");case 38:a++,e.next=29;break;case 41:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"liteOpen",value:(n=_asyncToGenerator(regenerator.mark((function e(n){var t,r;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=getEvokeType(),r=t.evokeType,this.evokeTypeMap[r](n,{});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"generateScheme",value:function(e){return generateScheme$1(this.injectEnvToParams(e))}},{key:"generateUniversalLink",value:function(e){return generateUniversalLink$1(this.injectEnvToParams(e))}},{key:"generateYingYongBao",value:function(e){return generateYingYongBao(e)}},{key:"toAppStore",value:function(e){toAppStore(e)}},{key:"toMask",value:function(){evokeMap$1.mask()}}],[{key:"uaParser",value:function(){return uaParser()}},{key:"log",value:function(e){track_common(e)}},{key:"toAppStore",value:function(e){toAppStore(e)}},{key:"toYingYongBao",value:function(e){toYingYongBao(generateYingYongBao(e))}},{key:"toMask",value:function(){evokeMap$1.mask()}},{key:"generateScheme",value:function(e){return generateScheme$1(injectEnvToParams(e))}},{key:"generateSchemeV1",value:function(e){return generateScheme(injectEnvToParams(e))}},{key:"generateUniversalLink",value:function(e){return generateUniversalLink$1(injectEnvToParams(e))}},{key:"generateUniversalLinkV1",value:function(e){return generateUniversalLink(injectEnvToParams(e))}}]),e}();return CallApp}));
